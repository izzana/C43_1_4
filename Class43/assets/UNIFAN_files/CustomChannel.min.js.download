var CustomChannel=function(){function e(){var e=document.URL.split("/");e.indexOf("editar-modelo-de-formulario")>-1&&(he=1,ge=e[e.length-1],Pe=[ge,"page"],""===ve&&(ve=e[0]+"//"+e[2]+"/")),t()}function t(){if(document.body)o();else{var e=new MutationObserver(function(){document.body&&(o(),e.disconnect())});e.observe(document.documentElement,{childList:!0})}}function o(){var e=function(e){e=e.data,Array.isArray(e)?(e.forEach(function(e){a(e.ChannelData,e.FormData)}),h()):console.warn("Your form template has not been uploaded!",e)},t={isPreview:he,currentUrl:document.URL,authKey:ce};1==he&&(delete t.authKey,t.domain=ve,t.CustomChannelId=ge),te(me+"api/getCustomChannel",t,"POST",e,f);setInterval(function(){Ce!=document.URL&&Ce!=document.URL.split("#")[0]&&(Ce=document.URL,se=!0,i(),o())},1e3)}function n(e,t){return e.ordem<t.ordem?-1:e.ordem>t.ordem?1:0}function a(e,t){t.etapas.sort(n);var o={bodyData:e,settings:t};re.push(o)}function i(){re=[],s()}function s(){const e=document.querySelectorAll(".rubeus-modal")[0];e&&e.parentElement.remove()}function c(e,t){var o={isPreview:he,id:e};1==he?o.domain=ve:o.authKey=ce,te(me+"api/getOffersAllowed",o,"POST",function(o){if(o.success){fe[e]=o.dados;var n={attribute:"evento.codOferta",data:o.dados,id:e};d(n,t)}},u)}function r(e,t){if(""==pe){var o={isPreview:he};1==he?o.domain=ve:o.authKey=ce,te(me+"api/getCities",o,"POST",function(o){if(o.success){pe=o.dados;var n={attribute:"pessoa.cidade",data:o.dados,id:e};d(n,t)}},p)}else{var n={attribute:"pessoa.cidade",data:pe,id:e};d(n,t)}}function d(e,t){switch(t){case"1":ActionsForm.setSelectOptions(e.attribute,e.data);break;case"2":X(e,"SD",e.id)}}function l(e,t){switch(e.isPreview=he,e.CustomChannelType=t,t){case"1":ActionsForm.setSettings(e);break;case"2":1==e.editorPopup[0].gatilhoRolagem&&R(e.idCanalPersonalizado),1==e.editorPopup[0].gatilhoIntencaoSaida&&H(e.idCanalPersonalizado),1==e.editorPopup[0].gatilhoTempoDecorrido&&F(e.editorPopup[0].tempoDecorrido,e.idCanalPersonalizado),X(e,"StartActionsForm",e.idCanalPersonalizado)}return e.etapas.forEach(function(o){o.campos.forEach(function(o){switch(o.atributo){case"pessoa.cidade":r(e.idCanalPersonalizado,t);break;case"evento.codOferta":c(e.idCanalPersonalizado,t);break;default:o.temOpcoesPredefinidas&&d({attribute:o.atributo,data:o.opcoes,id:e.idCanalPersonalizado},t)}})}),0}function u(e){console.warn("Nenhuma oferta disponível para este canal",e)}function p(e){console.error("Nenhuma lista de cidades encontrada",e)}function f(e){console.warn("Nenhum popup disponível para esta página")}function m(e=customChannelId){return customChannel=[],re.forEach(function(t){t.bodyData.idCanalPersonalizado!=e||(customChannel=t)}),customChannel}function h(){const e=document.createElement("div");re.forEach(function(t,o){var n="",a="",i=t.bodyData,s=t.settings;if(s||1!=i.idTipoCanalPersonalizado){if(s.etapas.forEach(function(e){e.campos.forEach(function(e){var t=e.atributo,o=e.nome;"Estado"===o&&e.opcoes.forEach(function(e){Te.push(e.titulo)}),t.indexOf("camposPersonalizados")>-1&&(t=t.split("."),t=t[0]+"."+t[2]+`${e.regra.indexOf("logico")>-1?"?bool":""}`);var n=s.idCanalPersonalizado+"|"+o+"#"+t;-1==we.indexOf(n)&&we.push(n),"Oferta de curso"===o&&e.camposVinculados.forEach(function(e){we.push(s.idCanalPersonalizado+"|"+e.nome+"#"+e.atributo)})})}),"string"!=typeof i.codigoHtml)return"html is necessary";switch(n+=j(i.codigoCss),n+=j(i.codigoAvancadoCss),n+=i.codigoHtml,i.idTipoCanalPersonalizado){case"1":if(se)break;void 0!==s.editorInformacaoPagina&&(O(s.editorInformacaoPagina[0].tituloPagina),I("description",s.editorInformacaoPagina[0].descricao),I("viewport","width=device-width, initial-scale=1.0"),document.head.innerHTML+=T("icon","32x32","image/png",s.editorInformacaoPagina[0].favIcon)),Q(i.idCanalPersonalizado),document.head.innerHTML+=a;const t=document.createElement("div");t.innerHTML=n,document.body.appendChild(t),A(i.codigoAvancadoJavascriptHead),z(i.codigoAvancadoJavascriptBody),w(i.idCanalPersonalizado);break;case"2":ae||(idChannel=i.idCanalPersonalizado,e.appendChild(D(idChannel,s.editorPopup[0].alturaPopup,s.editorPopup[0].larguraPopup)),ed={body:n,jsBody:i.codigoAvancadoJavascriptBody,head:a,jsHead:i.codigoAvancadoJavascriptHead},be[idChannel]=ed)}P(s),C(),v()}else document.body.innerHTML=i.codigoHtml}),document.body.insertAdjacentElement("beforeend",e),document.body.insertAdjacentElement("beforeend",k("stylesheet",!1,"text/css",me+"libs/css/PatternStyle.min.css"))}function g(){re.forEach(e=>{switch(e.bodyData.idTipoCanalPersonalizado){case"1":A(e.bodyData.codigoCookieJavascriptHead),z(e.bodyData.codigoCookieJavascriptBody);break;case"2":if(!ae){const t={jsCookieHead:e.bodyData.codigoCookieJavascriptHead,jsCookieBody:e.bodyData.codigoCookieJavascriptBody};X(t,"LgpdStatus",e.bodyData.idCanalPersonalizado)}}})}function v(){var e=document.querySelectorAll('div[name="cta"]');if(e.length>0)for(const t in e)if(e.hasOwnProperty(t)){const o=e[t],n=o.getAttribute("cta-script");o.setAttribute("cta-script",""),scriptNode=b(n),scriptNode&&o.appendChild(scriptNode)}}function b(e){var t=document.createElement("script"),o=y(e);return!!o&&(o.forEach(function(e){t.setAttribute(e.key,e.value)}),t.setAttribute("defer",""),t)}function y(e){var t=e.match(/(\S+)=(?:(['"])([\s\S]*?)\2|([^\s>]+))/gim),o=[];return!!(Array.isArray(t)&&t.length>0)&&(t.forEach(function(e){e=e.split("='"),e[1]=e[1].split("'")[0],o.push({key:e[0],value:e[1]})}),o)}function C(){var e=document.querySelectorAll('div[name="anchor"]');if(e.length>0)for(const t in e)if(e.hasOwnProperty(t)){const o=e[t];o.addEventListener("click",function(){var e=this.getAttribute("anchorId"),t=this.getAttribute("behavior");if(e){var o=document.getElementById(e);o&&window.scrollTo({top:o.offsetTop,behavior:t})}})}}function P(e){e.etapas.forEach(function(e){e.campos.forEach(function(e){switch(e.atributo){case"evento.codOferta":e.camposVinculados.length>0&&e.camposVinculados.forEach(function(e){E(e.atributo)}),E(e.atributo)}})})}function E(e){const t=document.getElementsByName(e);t.length>0&&(t.item(0).options[0].innerText="Carregando...")}function w(e){var t=setInterval(function(){("undefined"!=typeof RBTracking||ae)&&(N(e,"page"),clearInterval(t))},500)}function T(e,t,o,n){return"<link"+(e?' rel="'+e+'"':"")+(t?' size="'+t+'"':"")+(o?' type="'+o+'"':"")+' href="'+n+'" />'}function k(e,t,o,n){const a=document.createElement("link");return a.rel=e||null,a.size=t||null,a.type=o||null,a.href=n||null,a}function I(e,t){document.head.innerHTML+='<meta name="'+e+'" content="'+t+'"/>'}function O(e){var t=document.getElementsByTagName("title");t.length>0?t[0].text=e:document.head.innerHTML+="<title>"+e+"</title>"}function z(e){"string"==typeof e&&document.body.appendChild(S(e))}function A(e,t=!0){"string"==typeof e&&document.head.appendChild(S(e,t))}function S(e,t=!0){var o=document.createElement("script");return o.text=e,t&&(o.text=x(e)),o}function x(e){return"try {\n    "+e+"\n} catch (e) {\n    console.warn('Script personalizado não foi executado, pois, contem os seguintes erros: ', e);\n}"}function j(e){return"string"==typeof e?"<style>"+e+"</style>":""}function L(e){const t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}function D(e,t,o){const n=document.createElement("div");n.id="rubeusModalCustomChannel"+e,n.className="rubeus-modal",n.style.display="none";const a=document.createElement("div");a.className="rubeus-div-iframe";const i=document.createElement("span");i.id="rubeusModalClose"+e,i.className="rubeus-close";const s=document.createElement("img");s.src="https://docs.rubeus.com.br/assets/images/baseline_clear_white_48dp.png",s.style="width: 32px";const c=document.createElement("iframe");return c.id="#customChannel"+e,c.className="rubeus-custom-channel-iframe",c.style="max-width: "+o+"px; max-height: "+t+"px;",c.src=me+"page/customChannelFrame/"+e,i.appendChild(s),a.appendChild(i),a.appendChild(c),n.appendChild(a),n}function R(e){var t=[];t[e]=setInterval(function(){window.innerHeight/2+window.scrollY>=document.body.offsetHeight/2&&(B(e,"center"),clearInterval(t[e]))},100)}function F(e,t){setTimeout(function(){B(t,"timed")},1e3*e)}function H(e){"function"!=typeof document.body.onmouseleave?document.body.onmouseleave=function(){B(e,"escape"),document.body.onmouseleave=null,ue.length>0&&H(ue.shift())}:-1==ue.indexOf(e)&&ue.push(e)}function B(e,t,o){if(o||(o=""),0==de){Pe=[e,t];var n=ye?null:window.localStorage.getItem("popupShown");null==n&&(n=""),N(e,t),de=e;var a=document.getElementById("rubeusModalCustomChannel"+e);if(null==a)return de=0,"not a popup";document.body.style.overflow="hidden",a.style.display="block";var i=document.getElementById("rubeusModalClose"+e);if(i.onclick=function(){M(e)},""!==o){for(index in filteredOffer=[],fe[e])fe[e][index].codOfertaCurso==o&&filteredOffer.push(fe[e][index]);filteredOffer.length>0&&X(filteredOffer,"CustomOffer",e)}}else le.push([e,t,o])}function M(e){var t=document.getElementById("rubeusModalCustomChannel"+e);c(e,"evento.codOferta"),de=0,t.className="rubeus-modal rubeus-modal-off",document.body.style.overflow="auto",Pe=[ie,"page"],X(fe[e],"CustomOffer",e),setTimeout(function(){t.style.display="none",t.className="rubeus-modal",le.length>0&&(B(le[0][0],le[0][1],le[0][2]),le.shift())},580)}function N(e,t){var o=m(e);if(Array.isArray(o))return!1;var n=0;switch(t){case"center":n=o.settings.idTipoEventoRolagem;break;case"timed":n=o.settings.idTipoEventoTempo;break;case"escape":n=o.settings.idTipoEventoFuga;break;case"page":n=o.settings.idTipoVisualizouPagina}RBTracking.sendEvent({tipo:n,origem:o.settings.idOrigem,token:o.settings.token})}function _(){var e=window.navigator,t=window.screen,o=e.mimeTypes.length;o+=e.userAgent.replace(/\D+/g,""),o+=e.plugins.length,o+=t.height+t.width+t.pixelDepth+t.colorDepth;for(var n="",a=0;a<32;a++)n+=o.charAt(Math.floor(Math.random()*o.length));return n+1*new Date}function U(e,t){t||(t=0),Ae.currentStep=e.currentStage;var o=m(e.channelId).settings.etapas;if(Ae.steps=o.length-1,o=o[Ae.currentStep],Ae.PopupId=t,e.contato!={}){0==Object.keys(e.contato.camposPersonalizados).length&&delete e.contato.camposPersonalizados,0!=Ae.external_id&&(e.contato.id=Ae.external_id);var n=function(e){CustomChannel.callbackListener({type:"contact",data:{success:!1,objectResponse:e}})},a=function(e){CustomChannel.callbackListener({type:"contact",data:{success:!0,id:e.data.id,objectResponse:e}})};RBTracking.sendData(e.contato,a,n)}if(e.processo!={}){var i=e.processo;for(var s in i)"null"!==i[s]&&null!==i[s]||delete i[s];if(e.processo.descricao=$(e),e.processo.codOferta&&(e.processo.curso=e.processo.codOferta),e.processo.data){const t=m(Pe[0]),o=K(t.settings.nomeCanal)+"_data_atividade";e.processo.tipoData=o}const n="1"===m().settings.utilizaCodRegistro;if(n&&(e.processo.codRegistro=Ie),e.processo!={}&&e.processo.codOferta)if(0!=t){const o=Object.assign({},e.processo);X(o,"Pay",t)}else ActionsForm.setProcessData(Object.assign({},e.processo));J(e.processo),G(e.processo),Ae.eventData={eventData:e.processo,eventType:o.tipoEvento}}}function J(e){ke={unidade:e.unidade||ke.unidade||null,modalidade:e.modalidade||ke.modalidade||null,curso:e.curso||ke.curso||null,processoSeletivo:e.processoSeletivo||ke.processoSeletivo||null,localOferta:e.localOferta||ke.localOferta||null}}function G(e){e.unidade=e.unidade||ke.unidade,e.modalidade=e.modalidade||ke.modalidade,e.curso=e.curso||ke.curso,e.processoSeletivo=e.processoSeletivo||ke.processoSeletivo,e.localOferta=e.localOferta||ke.localOferta}function K(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/([^\w]+|\s+)/g,"_").replace(/\-\-+/g,"_").replace(/(^-+|-+$)/,"")}function V(e){var t=Object.assign({},e);return"object"==typeof t.camposPersonalizados&&(t=Object.assign(t,t.camposPersonalizados),delete t.camposPersonalizados),t}function $(e){var t="<p>";re.forEach(function(t){if(t.settings.idOrigem==e.contato.origem)return customChannelId=t.settings.idCanalPersonalizado});var o=V(e.processo),n=V(e.contato),a=Object.assign(n,o);for(var i in a){var s=a[i];we.forEach(function(e){const o={key:e.split("#")[1].split(".")[1].split("?")[0],label:e.split("#")[0].split("|")[1],channel:e.split("|")[0],isBoolean:!!e.split("#")[1].split(".")[1].split("?")[1]};if(o.key===i&&o.channel==customChannelId){switch(o.label){case"Cidade/Estado":pe.forEach(function(e){e.id!=s||(s=e.titulo)});break;case"Estado":s=Te[a[i]-1];break;case"Sexo":s=2==s?"Feminino":"Masculino";break;default:description=Y(o.label,s,fe[customChannelId]),0!=description&&(s=description)}o.isBoolean&&(s="1"==s?"Verdadeiro":"Falso"),Array.isArray(s)&&(s=s[0]instanceof File?q(s,"name"):s.join(", ")),s instanceof File?s=s.name:"object"==typeof s&&(s=s[i]),s&&""!==s||(s="<i>vazio</i>"),t+='<b style="padding-top: 10px">'+o.label+":</b> "+s+"<br>"}})}return t+="</p>",t}function q(e,t){var o=e.map(e=>e[t]);return o.join(", ")}function Y(e,t,o){return keys=["Curso","Oferta de curso","Unidade","Modalidade","Processo seletivo","Local de oferta"],!(-1==keys.indexOf(e)||!Array.isArray(o))&&(response="",e=e.replace(" de ","").replace(" ","").toLowerCase(),o.forEach(function(o){for(var n in o)if(fieldKey=n.replace("id","").toLowerCase(),e===fieldKey&&t==o[n]){response=o[n.replace("id","titulo")];break}response}),response)}function W(e){switch(e.type){case"contact":if(e.data.success){Ee&&N(Pe[0],Pe[1]),0==Ae.external_id&&(Ae.external_id=e.data.id);var t=function(e){CustomChannel.callbackListener({type:"event",data:{success:e.success,objectResponse:e}})};RBTracking.sendEvent(Ae.eventData,t,t),Ae.steps==Ae.currentStep&&(Ae.external_id=0,ke={},Ie=_(),Ee=!0,ye||sessionStorage.setItem("newVisitor",!0))}else 0!=de?X(e.data.objectResponse,"contact",de):ActionsForm.callbackError(e.data.objectResponse);break;case"event":Ae.PopupId&&0!=Ae.PopupId?X(e.data.success,"event",Ae.PopupId):e.data.success?ActionsForm.callbackNextStage():ActionsForm.callbackError(e.data.objectResponse)}}function X(e,t,o){var n={type:t,data:e},a=document.getElementById("#customChannel"+o);a&&a.contentWindow.postMessage(n,"*")}function Q(e){Se[e]=setInterval(()=>{if(""!=ze.intlTelInputCss&&""!=ze.intlTelInput&&""!=ze.materialIcons&&""!=ze.materializeCss&&""!=ze.utils&&""!=ze.actionsForm&&""!=ze.materialize){const t=m(e);"1"==t.bodyData.idTipoCanalPersonalizado?Z():X(ze,"LibsInjection",e),l(t.settings,t.bodyData.idTipoCanalPersonalizado),clearInterval(Se[e])}},500)}function Z(){L(ze.intlTelInputCss),L(ze.materialIcons),A(ze.intlTelInput,!1),A(ze.utils,!1),A(ze.materialize,!1),A(ze.actionsForm,!1),ActionsForm.iniciaInputTel()}function ee(e){var t=e.data;switch(t.type){case"CC":var o=t.data;be[o]&&(X(be[o],"CC",o),be[o]=!0,Q(o)),Oe=!0;break;case"objectToSubmit":U(t.data,t.data.channelId)}}function te(e,t,o,n,a){"function"!=typeof n&&(n=function(e){return e}),"function"!=typeof a&&(a=function(e){return e});var i=new XMLHttpRequest;"GET"===o?i.open(o,e+t,!0):(i.open(o,e,!0),i.setRequestHeader("Content-Type","application/json"));var s=function(e){""!=e&&("string"==typeof e&&(e=JSON.parse(e)),e.success?n(e):a(e))};i.onreadystatechange=function(){4==i.readyState&&(200==i.status?s(i.responseText):a(i.responseText))},"GET"===o?i.send():i.send(JSON.stringify(t))}async function oe(e,t,o){const n=await fetch(e,{method:t});var a=n.headers.get("content-type");a&&n.text().then(function(e){o(e)})}function ne(){oe(`${me}libs/css/intlTelInput.min.css`,"GET",e=>{ze.intlTelInputCss=e}),oe(`${me}libs/intlTelInput.js`,"GET",e=>{ze.intlTelInput=e}),oe("https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css","GET",e=>{ze.materializeCss=e}),oe("https://fonts.googleapis.com/icon?family=Material+Icons","GET",e=>{ze.materialIcons=e}),oe(`${me}libs/utils.js`,"GET",e=>{ze.utils=e}),oe(`${me}libs/ActionsForm.min.js`,"GET",e=>{ze.actionsForm=e.replace("{{urlPay}}","https://rubeuspay.apprbs.com.br/")}),oe(`${me}libs/materialize.mod.min.js`,"GET",e=>{ze.materialize=e})}const ae=window.top!==window.self,ie="";var se=!1,ce="4Os5E6iIbwADrqNr4kj6",re=[],de=0,le=[],ue=[],pe="",fe=[],me="https://tracking.apprubeus.com.br/",he=0,ge=0,ve="",be=[],ye=!1,Ce=document.URL;document.cookie="ckcookie=0",-1==document.cookie.indexOf("ckcookie")&&(ye=!0);var Pe=[ie,"page"],Ee=!0;if(!ye)Ee=sessionStorage.hasOwnProperty("newVisitor");var we=[],Te=[],ke={},Ie=_(),Oe=!1;const ze={intlTelInputCss:"",intlTelInput:"",materializeCss:"",materialIcons:"",utils:"",actionsForm:"",materialize:""};ne(),""===ce&&(ce=RBTracking.getHostClient()),e();var Ae={eventData:{},currentStep:0,external_id:0,steps:0,PopupId:0};const Se={};return window.addEventListener("message",ee,!1),{callbackListener:W,setObjectToSubmit:U,showPopup:B,loadCustomJs:g,channelsLoaded:()=>Oe}}();