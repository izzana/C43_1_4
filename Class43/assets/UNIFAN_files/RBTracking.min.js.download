var RBTracking=RBTracking?(()=>(console.warn("Já existe uma outra instância do tracking na página."),RBTracking))():function(){function e(){return Y&&ve||!Y}function t(){return!pe&&null==document.getElementById("monpag")&&(ne=document.createElement("iframe"),ne.id="monpag",ne.src=z+"page/corsFrame",ne.width=0,ne.height=0,ne.hidden=!0,document.body.appendChild(ne),!0)}function n(t,n=""){if(t){if(me=!0,e())be||p(),v();else{const t=H(()=>{e()&&(clearInterval(t),p(),v())},300)}document.cookie="rb_lgpd=true",document.cookie=`rb_c_hash=${n}`}s()}function a(e){return"function"!=typeof e&&(e=function(e){return e}),e}function o(e){r("monpag",e)}function r(e,t){document.getElementById(e).contentWindow.postMessage(t,"*")}function i(e){switch(e.data.type){case"IframeDoned":o(l());break;case"CreateCookie":var t=$("b_id",e.data.data);"string"==typeof t&&""!=t&&(ue=t);break;case"TrackingEventUp":w(e.data.data,function(t){e.source.postMessage({type:"TrackingEventDown",data:t,index:e.data.index},e.origin)},function(t){e.source.postMessage({type:"TrackingEventDown",data:t,index:e.data.index},e.origin)});break;case"TrackingDataUp":A(e.data.data,function(t){e.source.postMessage({type:"TrackingDataDown",data:t,index:e.data.index},e.origin)},function(t){e.source.postMessage({type:"TrackingDataDown",data:t,index:e.data.index},e.origin)});case"FrameGetVisitor":if(e.data.data.called){const t=B();e.source.postMessage({type:"FrameGetVisitorDown",data:t,index:e.data.index},e.origin)}break;case"TrackingEventDown":var n=e.data.index;e.data.data.success?ke[n-1](e.data.data):we[n-1](e.data.data);break;case"TrackingDataDown":n=e.data.index;e.data.data.success?_e[n-1](e.data.data):Ce[n-1](e.data.data);break;case"FrameGetVisitorDown":n=e.data.index;e.data.data.success?Ae[n-1](e.data.data):Ee[n-1](e.data.data);break;case"LgpdStatus":const a=setInterval(()=>{me&&(clearInterval(a),e.source.postMessage({type:"setLgpdStatus",data:me},e.origin))},400);break;case"TrackingGetHash":const r=setInterval(()=>{ae&&(clearInterval(r),e.source.postMessage({type:"setTrackingGetHash",data:ae},e.origin))},10);break;case"setTrackingGetHash":ae=e.data.data;break;case"setLgpdStatus":CustomChannel.loadCustomJs()}}function s(){const e=document.getElementById("rb-lgpd");e&&(e.style.display="none")}function c(t=!1){const n=R(),a="rbteste_xQzKoMZG0I"==O("utm_campaign");if(!n||a||e()){var o=["https://cdn.jsdelivr.net/npm/ua-parser-js@0/dist/ua-parser.min.js"];g(o,function(){ie=document.URL,t||u(!1),v()})}else ye=!0,H()}function d(e){e.hasOwnProperty("id")&&(e=e.id,e),pe||localStorage.setItem("visitorId",e)}function u(e,t=!1){if(me||t||!Y||e&&!ye&&!ve){ve=!0;var n=O("rbSessionId");""==n?P():P(decodeURIComponent(n))}}function l(e=!1){var t=new Date;t.setFullYear(t.getFullYear()+1),ue=j();var n=`b_id=${ue};`+`expires = ${t.toUTCString().replace("GMT","UTM")};`+"SameSite=None; Secure",a={type:"CreateCookie",data:n,hardReset:e};return a}function p(){ue="",oe=R(),o(l(!0)),m()}function m(){f();const e=Y;u(e)}function f(){ae="",ye=!1,pe||(sessionStorage.removeItem("s_id"),sessionStorage.removeItem("initUp"))}function g(e,t,n){Array.isArray(e)||(e=[e]);var a=0,o=[];e.forEach(function(r,i){o.push(document.createElement("script")),o[i].type="text/javascript",o[i].readyState?o[i].onreadystatechange=function(){"loaded"!=o[i].readyState&&"complete"!=o[i].readyState||(o[i].onreadystatechange=null,a++,a==e.length&&t())}:o[i].onload=function(){a++,a==e.length&&t()},o[i].src=r,n&&(o[i].id=n),document.getElementsByTagName("head")[0].appendChild(o[i])})}function v(){const e=b();return S(z+ee,e,"POST",Pe,Me)}function b(){var e={browser:{name:"desconhecido",version:"desconhecido"},os:{name:"desconhecido",version:"desconhecido"},device:{vendor:"desconhecido",model:"desconhecido",type:"desconhecido"}};if("undefined"!=typeof UAParser&&!navigator.doNotTrack&&me)e=(new UAParser).getResult();var t=document.URL;me||(t=t.split("?")[0]);var n={hostClient:re,rbcampaign:O("rbcampaign"),session_id:R(),browser_id:ue,event_id:j(),gaClientId:U(),browserName:e.browser.name,browserVersion:e.browser.version,osName:e.os.name,osVersion:e.os.version,utm:h(),ad:y(),deviceModel:"",deviceType:"",sourceMedium:"",sourceName:"",sourcePage:"",cookieBlocked:pe,currentUrl:t,pageTitle:document.title,lgpdTerms:me};oe&&(n.lastSession=oe),e.device.vendor&&e.device.model?(n.deviceModel=e.device.vendor+" "+e.device.model,"desconhecido desconhecido"===n.deviceModel&&(n.deviceModel="desconhecido")):e.device.model?n.deviceModel=e.device.model:n.deviceModel="Desconhecido";var a={console:"Console (video game)",tablet:"Tablet",mobile:"Smartphone",smarttv:"Smart Tv",wearable:"Dispositivo Vestível",embedded:"Sistema Embarcado",computer:"Computador"};return e.device.type&&a[e.device.type]?n.deviceType=a[e.device.type]:!navigator.doNotTrack&&me&&(n.deviceType=a.computer,n.deviceModel=a.computer),""!=document.referrer?n.sourcePage=document.referrer:n.sourcePage="",n}function h(){return utmAttributes={source:O("utm_source"),medium:O("utm_medium"),campaign:"",term:"",content:""},me&&(utmAttributes.campaign=O("utm_campaign"),utmAttributes.term=O("utm_term").split("+"),utmAttributes.content=O("utm_content")),utmAttributes}function y(){return{rb_camp:O("rb_camp"),rb_grp:O("rb_grp"),rb_ad:O("rb_ad"),rb_pfm:O("rb_pfm"),rb_typeTracking:O("rb_typeTracking"),rb_acc:O("rb_acc"),rb_kw:O("rb_kw")}}function T(e){const t={};if(e.eventType?t.tipo=e.eventType:e.codEventType&&(t.codTipo=e.codEventType),e.eventData)for(key in e.eventData)t[key]=e.eventData[key];return Object.getOwnPropertyNames(t).length>0?t:e}function k(e,t,n){if(e=T(e),!e.tipo&&!e.codTipo)return console.error('the fields "tipo" or "codTipo" are requested',e),JSON.stringify(e);if(ye&&ge&&(x(),ae=R(),ae)){Array.isArray(e)||(e=[e]);var a={session_id:ae,hostClient:re,event:{},pageTitle:document.title};for(var o in e)a.event=e[o],I(z+W,a,"PATCH",ce[o]||t,de[o]||n)}}function w(e,t,n){Array.isArray(e)?se.concat(e):se.push(e),"function"==typeof t?ce.push(t):Array.isArray(t)?ce.concat(t):ce.push(function(e){return e.responseText}),"function"==typeof n?de.push(n):Array.isArray(n)?de.concat(n):de.push(function(e){return"error: "+e.responseText})}function _(){if((document.URL!=ie||Y)&&!navigator.doNotTrack&&me&&(ie=document.URL,ae=R(),ae)){var e={url:document.URL,session_id:ae,hostClient:re,pageTitle:document.title};I(z+Z,e,"PATCH",Ue,Ue)}}function C(e,t){if(!ye)return!1;e=a(e),t=a(t),I(`${z}api/getData?session_id=${R()}&browser_id=${ue}&hostClient=${M()}`,"","GET",e,t)}async function A(t,n,o){if(!ye&&!e())return o=a(o),o({success:!1}),!1;if(!me&&he){const e=Y,t=!0;p(),Y&&u(e,t),await v(),be=!0}if(he=!1,void 0===t)return"Data can't be empty";ae=R(),null==ae&&""==ae||(t.session_id=ae,t.hostClient=re,t.substitute_id=j(),(t.telefonePrincipal||t.emailPrincipal)&&(t.eventContactData=E()),I(z+Q,t,"PATCH",n,o))}function E(){const e=b(),t={historicoNavegacao:{origem:"",urlOrigem:e.sourcePage,tituloPagina:e.pageTitle,tipoOrigem:"",campanha:e.utm.campaign,urlAcessada:e.currentUrl,dispositivo:e.deviceType,processoNavegacao:ae,utmSource:e.utm.source,utmMedium:e.utm.medium,utmCampaign:e.utm.campaign,utmTerm:e.utm.term,utmContent:e.utm.content,rb_camp:e.ad.rb_camp,rb_grp:e.ad.rb_grp,rb_ad:e.ad.rb_ad,rb_pfm:e.ad.rb_pfm,rb_typeTracking:e.ad.rb_typeTracking,rb_acc:e.ad.rb_acc,rb_kw:e.ad.rb_kw},codTipo:""};return t}async function S(e,t,n,a,o){var r=new Headers({"Content-Type":"application/json"});const i=await fetch(e,{method:n,headers:r,body:JSON.stringify(t)});var s=i.headers.get("content-type");if(s&&-1!==s.indexOf("application/json"))return i.json().then(function(e){e.success?a(e):o(e)})}function I(e,t,n,o,r){o=a(o),r=a(r);var i=new XMLHttpRequest;let s=!1;if(t.camposPersonalizados?s=D(t.camposPersonalizados):t.event&&t.event.camposPersonalizados&&(s=D(t.event.camposPersonalizados)),s){const e=new FormData;L(e,t),t=e,n="POST"}"GET"===n?i.open(n,e+t,!0):(i.open(n,e,!0),i.setRequestHeader("Access-Control-Allow-Origin","*"),s||i.setRequestHeader("Content-Type","application/json"));var c=function(t){""!=t&&("string"==typeof t&&(t=JSON.parse(t)),t.success?(e===z+Q&&d(t.data),o(t)):r(t),e===z+W&&x())};i.onreadystatechange=function(){4==i.readyState&&(200==i.status||300==i.status?c(i.responseText):r(i.responseText))},"GET"===n?i.send():s?i.send(t):i.send(JSON.stringify(t))}function x(){ge=!ge}function D(e,t=!1){if(e instanceof Object||Array.isArray(e))for(var n in e){const a=e[n];if(!(a instanceof File)&&a instanceof Object&&Array.isArray(a))t=D(a,t);else if(a instanceof File){t=!0;break}}else value instanceof File&&(t=!0);return t}function L(e,t,n="",a=!1){t instanceof Object&&Object.keys(t).forEach(o=>{const r=t[o];if(!(r instanceof File)&&r instanceof Object&&!Array.isArray(r))return!a&&""!==n&&r instanceof Object?L(e,r,`${n}[${o}]`,!0):L(e,r,o,!1);n&&(o=`${n}[${o}]`),Array.isArray(r)?r.forEach((t,n)=>{if(!(t instanceof File)&&t instanceof Object){const a=L(e,t,`${o}[${n}]`,!1);a&&e.append(`${o}[]`,a)}else Array.isArray(t)&&t.length>0?e.append(`${o}[]`,t):t&&e.append(`${o}[]`,t)}):r&&e.append(o,r)})}function O(e){const t=window.location.search,n=new URLSearchParams(t),a=n.get(e)||"";return a}function P(e){ae=void 0===e?j():e,pe||sessionStorage.setItem("s_id",ae)}function R(e){return void 0===e?pe?ae:sessionStorage.getItem("s_id")||ae:e.indexOf("?")?e+"?rbSessionId="+encodeURIComponent(R()):e+"&rbSessionId="+encodeURIComponent(R())}function M(){return re}function U(){var e="";return pe||(e=$("_ga")),""!=e?(e=e.split("."),e[2]+"."+e[3]):""}function $(e,t){if(pe)return"";void 0===t?t=document.cookie.split(";"):"string"==typeof t&&(t=t.split(";"));for(var n=0;n<t.length;n++)if(t[n].trim().indexOf(e)>-1)return t[n].trim().split("=")[1];return""}function j(){var e=window.navigator,t=window.screen,n=e.mimeTypes.length;n+=e.userAgent.replace(/\D+/g,""),n+=e.plugins.length,n+=t.height+t.width+t.pixelDepth+t.colorDepth;for(var a="",o=0;o<32;o++)a+=n.charAt(Math.floor(Math.random()*n.length));return a+1*new Date}function N(e){if(e.data){if(fe=e.data.eventType,e.data.hash==$("rb_c_hash"))return me=!0,!0;$e.id="rb-lgpd",$e.classList=`rb-row rb-dialog-box rb-${e.data.position}`;const t=document.createElement("div");t.classList="rb-text-box";const n=document.createElement("div");n.classList="rb-row",n.style.flexDirection="row-reverse";const a=document.createElement("p");a.classList="rb-text-box",a.innerHTML=e.data.notificationTerms,t.appendChild(a);const o=document.createElement("button");o.classList="rb-button rb-accept",o.style.backgroundColor=e.data.color,o.setAttribute("onClick",`RBTracking.aceptLgpd(true, '${e.data.hash}')`),o.textContent=e.data.acceptLabel,n.insertAdjacentElement("afterbegin",o);const r=document.createElement("button");r.classList="rb-button rb-recuse",r.style.color=e.data.color,r.setAttribute("onClick","RBTracking.aceptLgpd(false)"),"0"===e.data.adhesion&&(r.hidden=!0),r.textContent=e.data.declineLabel,n.insertAdjacentElement("beforeend",r),$e.insertAdjacentElement("afterbegin",t),$e.insertAdjacentElement("beforeend",n);const i=setInterval(()=>{document.body&&(clearInterval(i),document.body.appendChild($e))},100)}}function G(){I(z+"api/getCookiePrivacyData",`?origin=${document.location.origin}&pathname=${document.location.pathname}&authKey=${re}`,"GET",N,()=>{console.warn("Aviso não encontrado!")});const e=document.createElement("link");e.href=z+"libs/css/lgpd.min.css",e.rel="stylesheet",document.head.appendChild(e)}function H(){if(!Y)setInterval(function(){1==ye&&_()},900);setInterval(function(){1==ye&&ge&&se.length>0&&(k(se[0],ce[0],de[0]),se.shift(),ce.shift(),de.shift())},1e3)}function B(){var e=new XMLHttpRequest;const t=z+X+"/getLastVisitorId?session_id="+R();return e.open("GET",t,!1),e.send(null),JSON.parse(e.responseText)}function F(e){if(e=a(e),ye)_(),e();else var t=setInterval(function(){1==ye&&(_(),clearInterval(t),e())},300);return!0}function V(e=(()=>!0)){if(ye)ve=!0;else{const e=!0;u(e)}const t=setInterval(()=>{ye&&(clearInterval(t),e())},200)}async function J(e){let t=B();for(let a=0;a<30;a++)try{const a=z+X+"/getEnrolment",o=await fetch(a,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({visitor_id:t.id,authKey:re})}),r="Não foi possível obter os dados da oferta gerada.";if(!o.ok)throw new Error(r);const{success:i,data:s}=await o.json();var n=null;if(e.codRegistro&&s?n=s.find(t=>t.codigoRegistro==e.codRegistro):s&&(n=s.find(t=>t.curso==e.curso&&(t.localOferta==e.localOferta||!e.localOferta)&&t.origem==e.origem)),n)return n;await q(2e3)}catch({name:e,message:t}){return console.error(`${e}: ${t}`),0}return 0}function q(e){return new Promise(t=>setTimeout(t,e))}const z="https://tracking.apprubeus.com.br/",K="0",Y=false,X="api/v2",Q=X+"/sendData",W=X+"/sendEvent",Z=X+"/sendNavigation",ee=X+"/sendVisitor",te=window.top!==window.self&&-1==document.URL.indexOf("editar-modelo-de-formulario")&&1!=K;var ne,ae,oe,re="4Os5E6iIbwADrqNr4kj6",ie="",se=[],ce=[],de=[],ue="",le=0,pe=!1,me=JSON.parse($("rb_lgpd")||true),fe=!1,ge=!0,ve=!1,be=!1,he=!0;document.cookie="ckcookie=0",-1==document.cookie.indexOf("ckcookie")&&(pe=!0);var ye=!pe&&"true"===sessionStorage.getItem("initUp");te||G();const Te=setInterval(()=>{document.body&&""!==z&&e()&&(t(),""!==ue&&(clearInterval(Te),ye?H():c(ve))),re||clearInterval(Te)},500);window.addEventListener("message",i,!1);var ke=[],we=[],_e=[],Ce=[],Ae=[],Ee=[];if(te){var Se=function(e,t,n=null){if(n)var a={type:t,data:e,index:n};else a={type:t,data:e};console.warn("Para o funcionamento correto é necessário que o script do tracking esteja instalado na página hospedeira do iframe!"),window.parent.postMessage(a,"*")};Se(null,"TrackingGetHash"),Se(!0,"LgpdStatus");var Ie=function(e){return e},xe=function(e,t,n){var a=ke.push(t||Ie);we.push(n||Ie),Se(e,"TrackingEventUp",a)},De=function(e,t,n){var a=_e.push(t||Ie);Ce.push(n||Ie),Se(e,"TrackingDataUp",a)},Le=function(e,t){var n=Ae.push(e||Ie);Ee.push(t||Ie),Se({called:1},"FrameGetVisitor",n)},Oe=function(){return ae};return{sendEvent:xe,sendData:De,idGenerator:j,getHash:Oe,getHostClient:M,getVisitor:Le}}if(null===document.getElementById("CustomChannelScript")){const e=[`${z}libs/CustomChannel.min.js?rbclicod=${M()}`];g(e,function(){return 1},"CustomChannelScript")}var Pe=function(e){le<2?e.success?(pe||sessionStorage.setItem("initUp",!0),ye=!0,me&&fe&&k({tipo:fe,descricao:Re()}),H()):(me?m():p(),le++,ye=!1,Y?(ve=!1,c(!0)):c(!1)):f()};const Re=()=>`<p><b style="padding-top: 10px">Página: </b><a target="_blank" href="${document.URL}">${document.title}</a></p>`;var Me=function(e){le<2?e.success?(sessionStorage.setItem("initUp",!0),ye=!0,H()):(me?m():p(),le++,ye=!1,Y?(ve=!1,c(!0)):c(!1)):f()};const Ue=function(e){e.success||(m(),le++,ye=!1,Y?(ve=!1,c(!0)):c(!1))},$e=document.createElement("div");if(RBTracking={getHash:R,getHostClient:M,getVisitor:B,sendEvent:w,getData:C,sendData:A,idGenerator:j,getEnrolment:J,clearSession:()=>{m(),v()},aceptLgpd:n},Y&&(RBTracking.navigate=F,RBTracking.start=V),!te){const e=setInterval(()=>{me&&"undefined"!=typeof CustomChannel&&CustomChannel.channelsLoaded()&&(clearInterval(e),CustomChannel.loadCustomJs())},200)}return RBTracking}();